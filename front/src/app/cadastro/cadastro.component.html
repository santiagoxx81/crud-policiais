<div class="container">
  <h1>Gerenciar Policiais</h1>
  <form (ngSubmit)="salvar()">
    <input [(ngModel)]="policial.rg_civil" name="rg_civil" placeholder="RG Civil" required />
    <input [(ngModel)]="policial.rg_militar" name="rg_militar" placeholder="RG Militar" required />
    <input [(ngModel)]="policial.cpf" name="cpf" placeholder="CPF" required />
    <input [(ngModel)]="policial.data_nascimento" name="data_nascimento" type="date" required />

    <input *ngIf="!editando" [(ngModel)]="policial.matricula" name="matricula" placeholder="Matrícula" required />

    <div class="form-buttons">
      <button type="submit" class="btn-blue">{{ editando ? 'Atualizar' : 'Adicionar' }}</button>
      <button type="button" (click)="cancelarEdicao()" *ngIf="editando" class="btn-red">Cancelar</button>
    </div>
  </form>

  <hr />

  <div class="search-section">
    <input [(ngModel)]="searchCpf" name="search_cpf" placeholder="Buscar por CPF" />
    <button (click)="buscarPorCpf()" class="btn-blue">Buscar</button>
    <button (click)="listarPoliciais()" class="btn-green">Limpar Busca</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>RG Civil</th>
        <th>RG Militar</th>
        <th>CPF</th>
        <th>Data de Nascimento</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of policiais">
        <td data-label="RG Civil">{{ p.rg_civil }}</td>
        <td data-label="RG Militar">{{ p.rg_militar }}</td>
        <td data-label="CPF">{{ p.cpf }}</td>
        <td data-label="Data de Nascimento">{{ p.data_nascimento | date:'dd/MM/yyyy' }}</td>
        <td data-label="Ações">
          <div class="table-actions">
            <button (click)="editar(p)" class="btn-blue">Editar</button>
            <button (click)="excluir(p.id!)" class="btn-red">Excluir</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>